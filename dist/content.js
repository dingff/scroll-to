(function(){var w={444:function(t){function c(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports},4:function(t,c,o){var i=o(883);function f(e,n){for(var a=0;a<n.length;a++){var u=n[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,i(u.key),u)}}function r(e,n,a){return n&&f(e.prototype,n),a&&f(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},783:function(t,c,o){var i=o(883);function f(r,e,n){return e=i(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports},518:function(t,c,o){var i=o(677).default;function f(r,e){if(i(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,e||"default");if(i(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports},883:function(t,c,o){var i=o(677).default,f=o(518);function r(e){var n=f(e,"string");return i(n)==="symbol"?n:String(n)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},677:function(t){function c(o){return t.exports=c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t.exports.__esModule=!0,t.exports.default=t.exports,c(o)}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports}},p={};function l(t){var c=p[t];if(c!==void 0)return c.exports;var o=p[t]={exports:{}};return w[t](o,o.exports,l),o.exports}var d={};(function(){var t=l(444).default,c=l(4).default,o=l(783).default,i=function(){"use strict";function f(){var r=this;t(this,f),o(this,"SCROLL_TO_MAP","SCROLL_TO_MAP"),o(this,"currMap",{}),window.onload=function(){r.getStorage().then(function(e){r.currMap=e,r.currMap[window.location.href]&&(r.scrollTo(r.currMap[window.location.href].top),r.initScrollFn())})},this.initMessageListener()}return c(f,[{key:"initScrollFn",value:function(){var e=this;this.currMap[window.location.href]&&(window.onscroll=this.debounce(function(){e.currMap[window.location.href]&&(e.currMap[window.location.href].top=window.scrollY,e.updateStorage(e.currMap))}))}},{key:"debounce",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,a;return function(){for(var u=arguments.length,_=new Array(u),s=0;s<u;s++)_[s]=arguments[s];clearTimeout(a),a=setTimeout(function(){e.apply(void 0,_)},n)}}},{key:"updateStorage",value:function(e){var n=this;return new Promise(function(a){chrome.storage.sync.set(o({},n.SCROLL_TO_MAP,e)).then(function(){a()})})}},{key:"updateLogo",value:function(){chrome.runtime.sendMessage({type:"updateLogo"})}},{key:"initMessageListener",value:function(){var e=this;chrome.runtime.onMessage.addListener(function(n,a,u){return n.type==="add"&&(e.currMap[window.location.href]={url:window.location.href,top:window.scrollY},e.initScrollFn(),e.updateStorage(e.currMap).then(function(){e.updateLogo(),u(!0)})),n.type==="delete"&&(delete e.currMap[window.location.href],window.onscroll=null,e.updateStorage(e.currMap).then(function(){e.updateLogo(),u(!0)})),n.type==="getLocation"&&u(window.location),n.type==="urlChange"&&(e.currMap[window.location.href]?(e.scrollTo(e.currMap[window.location.href].top),e.initScrollFn()):window.onscroll=null,u(!0)),!0})}},{key:"scrollTo",value:function(e){window.scrollTo({top:e,behavior:"smooth"})}},{key:"getStorage",value:function(){var e=this;return new Promise(function(n){chrome.storage.sync.get([e.SCROLL_TO_MAP]).then(function(a){n(a[e.SCROLL_TO_MAP]||{})})})}}]),f}();new i})()})();
