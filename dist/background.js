(function(){var m={},u="SCROLL_TO_MAP",g=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,o;return function(){for(var i=arguments.length,d=new Array(i),r=0;r<i;r++)d[r]=arguments[r];clearTimeout(o),o=setTimeout(function(){t.apply(void 0,d)},n)}},s=function(){return new Promise(function(t){chrome.storage.sync.get([u]).then(function(n){t(n[u]||{})})})},f=function(t){return new Promise(function(n){chrome.tabs.get(t,function(o){n(o.url)})})},a=function(t){s().then(function(n){f(t).then(function(o){chrome.action.setIcon({path:n[o]?"./logo/logo.png":"./logo/logo_gray.png"})})})};chrome.tabs.onActivated.addListener(function(e){a(e.tabId)}),chrome.tabs.onUpdated.addListener(g(function(e){a(e),chrome.tabs.sendMessage(e,{type:"urlChange"}).catch(function(){})}));var c=function(){chrome.tabs.query({active:!0,currentWindow:!0},function(t){var n=t[0].id;a(n)})};chrome.windows.onFocusChanged.addListener(function(e){e!==-1&&c()}),chrome.runtime.onMessage.addListener(function(e,t,n){e.type==="updateLogo"&&(c(),n(!0))})})();
